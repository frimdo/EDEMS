<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <link href="./node_modules/clusterize.js/clusterize.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="edems.js"></script>
</head>
<body>

<div id="main-grid">

    <div id="header-grid">

        <div id="buttons-grid" class="block">
            <input type="file" id="file" name="file" enctype="multipart/form-data"/>
            <button type="button" id="import">Import</button>
            <button type="button" id="export">Export</button>
            <!--<button type="button" id="advanced">Advanced</button>-->
        </div>

        <div id="clock-grid" class="block">
            <button type="button" id="rst-btn">RST</button>
            <button type="button" id="step-btn">Step</button>
            <button type="button" id="ustep-btn">uStep</button>
            <button type="button" id="urun-btn">uRun</button>
            <button type="button" id="stop-btn">Stop</button>
            <span>f: <input type="number" id="freq" title="freq" min="1" max="500"> Hz</span>
        </div>

        <div id="logo" class="block">
            EDEMS<select id="selectEdemsType">
            <option value="advanced" selected>advanced</option>
            <option value="basic">basic</option>
            <option value="unreal">unreal</option>
        </select>
            <!--<span>advanced</span>-->
        </div>
    </div>

    <div id="body-grid" class="advanced">

        <button type="button" class="flowButton" id="D2D" disabled>⬌</button>
        <button type="button" class="flowButton" id="REA">⬆</button>
        <button type="button" class="flowButton" id="WRT">⬇</button>
        <button type="button" class="flowButton" id="M2C" disabled>➡</button>
        <button type="button" class="flowButton" id="A2M" disabled>⬆</button>
        <button type="button" class="flowButton" id="C2D" disabled>⬆</button>
        <button type="button" class="flowButton" id="R2D">⬆</button>
        <button type="button" class="flowButton" id="D2R">⬇</button>
        <button type="button" class="flowButton" id="W2A">⬇</button>
        <button type="button" class="flowButton" id="A2W">⬆</button>
        <button type="button" class="flowButton" id="AL2">⬆</button>
        <button type="button" class="flowButton" id="D2L" disabled>⬇</button>
        <button type="button" class="flowButton" id="RAL" disabled>➡</button>
        <button type="button" class="flowButton" id="ALR" disabled>⬅</button>

        <div id="externalDataBus" class="block">
            External Data Bus
            <div id="EdataBus">placeholder</div>
        </div>

        <div id="internalDataBus" class="block">
            Internal Data Bus
            <input type="text" name="IdataBus" id="IdataBus" title="IdataBus">
        </div>

        <div id="memory-grid" class="block">
            <div class="nameBlock">
                Memory
                <button id="compileMemory" type="button">compile</button>
            </div>
            <div class="insideBlock">
                <div id="memory-editor">
LDA 0x12
ADDA 0x13
INCA
DECA
INCWD
DECWD
STA 0x14
.org 0x11
LDA 0x0101
<!--
00
01
07
00
42
24-->
                </div>
                <div id="scrollArea-memory" class="clusterize-scroll">
                    <table>
                        <tbody id="contentArea-memory" class="clusterize-content">
                        <tr class="clusterize-no-data">
                            <td>Loading data…</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>

        </div>

        <div id="controlUnit-grid" class="block">
            <div class="nameBlock">
                Control Unit
                <button id="compileMicrocode" type="button">compile</button>
            </div>
            <div class="insideBlock">
                <div type="button" id="IR">IR
                    <div id="instructionRegister">0x12 <span>UNKNOWN</span></div>
                </div>
                <div id="microcode-editor">;;;;;;;;;;;;;;;;;;;;; Jump directives
.DEF 0x41 LDF 2B
.DEF 0x41 LDB 2B
.DEF 0x41 LDD 2B
.DEF 0x41 LDS 2B
.DEF 0x41 LDA 2B
.DEF 0x41 LDC 2B
.DEF 0x41 LDE 2B
.DEF 0x41 LDP 2B

.DEF 0x4E STF 2B
.DEF 0x4E STB 2B
.DEF 0x4E STD 2B
.DEF 0x4E STS 2B
.DEF 0x4E STA 2B
.DEF 0x4E STC 2B
.DEF 0x4E STE 2B
.DEF 0x4E STP 2B

.DEF 0x5B ADDF 2B
.DEF 0x5B ADDB 2B
.DEF 0x5B ADDD 2B
.DEF 0x5B ADDS 2B
.DEF 0x5B ADDA 2B
.DEF 0x5B ADDC 2B
.DEF 0x5B ADDE 2B
.DEF 0x5B ADDP 2B

.DEF 0x6B INCF
.DEF 0x6B INCB
.DEF 0x6B INCD
.DEF 0x6B INCS
.DEF 0x6B INCA
.DEF 0x6B INCC
.DEF 0x6B INCE
.DEF 0x6B INCP

.DEF 0x6E INCWF
.DEF 0x6E INCWB
.DEF 0x6E INCWD
.DEF 0x6E INCWS

.DEF 0x71 DECF
.DEF 0x71 DECB
.DEF 0x71 DECD
.DEF 0x71 DECS
.DEF 0x71 DECA
.DEF 0x71 DECC
.DEF 0x71 DECE
.DEF 0x71 DECP

.DEF 0x74 DECWF
.DEF 0x74 DECWB
.DEF 0x74 DECWD
.DEF 0x74 DECWS

.DEF 0x77 JMP 2B

.DEF 0x82 JPIFC 2B
.DEF 0x82 JPIFZ 2B
.DEF 0x82 JPIFN 2B
.DEF 0x82 JPIFV 2B
.DEF 0x82 JPIFP 2B
.DEF 0x82 JPIFH 2B
.DEF 0x82 JPIFQ 2B
.DEF 0x82 JPIFX 2B

.DEF 0x86 JPIF 2B
.DEF 0x86 JPIB 2B
.DEF 0x86 JPID 2B
.DEF 0x86 JPIS 2B
.DEF 0x86 JPIA 2B
.DEF 0x86 JPIC 2B
.DEF 0x86 JPIE 2B
.DEF 0x86 JPIP 2B



;;;;;;;;;;;;;;;;;;;;;;;;;;;;; LD
COOP 0x0
; load low address
INCW PCH
W>AB PCH
RD
DB>R TMP2
; load high address
INCW PCH
W>AB PCH
RD
DB>R TMP1
; load value to register
W>AB TMP1
RD
DB>R OP
END

;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ST
COOP 0x08
; load low address
INCW PCH
W>AB PCH
RD
DB>R TMP2
; load high address
INCW PCH
W>AB PCH
RD
DB>R TMP1
; store value to register
W>AB TMP1
R>DB OP
WT
END

;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ADD
COOP 0x10
; load low address
INCW PCH
W>AB PCH
RD
DB>R TMP2
; load high address
INCW PCH
W>AB PCH
RD
DB>R TMP1
; add value to register
W>AB TMP1
RD
DB>R TMP0

R>DB OP
ALU ADD
DB>R OP
END

;;;;;;;;;;;;;;;;;;;;;;;;;;;;; INC
COOP 0x18
INCB op
END

;;;;;;;;;;;;;;;;;;;;;;;;;;;;; INCW
COOP 0x20
INCW op
END

;;;;;;;;;;;;;;;;;;;;;;;;;;;;; DEC
COOP 0x24
DECB op
END

;;;;;;;;;;;;;;;;;;;;;;;;;;;;; DECW
COOP 0x2C
DECW op
END

;;;;;;;;;;;;;;;;;;;;;;;;;;;;; JMP
; load low address
INCW PCH
W>AB PCH
RD
DB>R TMP1
; load high address
INCW PCH
W>AB PCH
RD
DB>R PCH
SVR PCL TMP1
DECW PCH
END

;;;;;;;;;;;;;;;;;;;;;;;;;;;;; JPIF
COOP 0x31
JOFN OP
JMP 0x77
END

;;;;;;;;;;;;;;;;;;;;;;;;;;;;; JPIF
COOP 0x39
JON OP
JMP 0x77
END
                </div>
                <div id="scrollArea-microcode" class="clusterize-scroll">
                    <table>
                        <tbody id="contentArea-microcode" class="clusterize-content">
                        <tr class="clusterize-no-data">
                            <td>Loading data…</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id=registers-grid class="block">
            <div class="nameBlock">Registers
                <button type="button" id="incr">++</button>
                <button type="button" id="decr">--</button>
                <button type="button" id="svr">⇄</button>
            </div>
            <div class="insideBlock">
                <div class="pairBlock">
                    <button type="button" id="F-pair" class="pairButton"></button>
                    <button type="button" id="F-button" class="registerButton">F <span>[0]</span>
                        <div id="registerF">placeholder</div>
                    </button>
                    <button type="button" id="A-button" class="registerButton selectedRegister">A <span>[4]</span>
                        <div id="registerA">placeholder</div>
                    </button>
                </div>
                <div class="pairBlock">
                    <button type="button" id="B-pair" class="pairButton"></button>
                    <button type="button" id="B-button" class="registerButton">B <span>[1]</span>
                        <div id="registerB">placeholder</div>
                    </button>
                    <button type="button" id="C-button" class="registerButton">C <span>[5]</span>
                        <div id="registerC">placeholder</div>
                    </button>
                </div>
                <div class="pairBlock">
                    <button type="button" id="D-pair" class="pairButton"></button>
                    <button type="button" id="D-button" class="registerButton">D <span>[2]</span>
                        <div id="registerD">placeholder</div>
                    </button>
                    <button type="button" id="E-button" class="registerButton">E <span>[6]</span>
                        <div id="registerE">placeholder</div>
                    </button>
                </div>
                <div class="pairBlock">
                    <button type="button" id="S-pair" class="pairButton"></button>
                    <button type="button" id="S-button" class="registerButton">S <span>[3]</span>
                        <div id="registerS">placeholder</div>
                    </button>
                    <button type="button" id="P-button" class="registerButton">P <span>[7]</span>
                        <div id="registerP">placeholder</div>
                    </button>
                </div>
                <div class="pairBlock">
                    <button type="button" id="PCH-pair" class="pairButton"></button>
                    <button type="button" id="PCH-button" class="registerButton">PCH <span>[8]</span>
                        <div id="registerPCH">placeholder</div>
                    </button>
                    <button type="button" id="PCL-button" class="registerButton">PCL <span>[12]</span>
                        <div id="registerPCL">placeholder</div>
                    </button>
                </div>
                <div class="pairBlock">
                    <button type="button" id="TMP0-pair" class="pairButton"></button>
                    <button type="button" id="TMP0-button" class="registerButton">TMP0 <span>[9]</span>
                        <div id="registerTMP0">placeholder</div>
                    </button>
                    <button type="button" id="OP-button" class="registerButton">OP <span>[13]</span>
                        <div id="registerOP">placeholder</div>
                    </button>
                </div>
                <div class="pairBlock">
                    <button type="button" id="TMP1-pair" class="pairButton"></button>
                    <button type="button" id="TMP1-button" class="registerButton">TMP1 <span>[10]</span>
                        <div id="registerTMP1">placeholder</div>
                    </button>
                    <button type="button" id="TMP2-button" class="registerButton">TMP2 <span>[14]</span>
                        <div id="registerTMP2">placeholder</div>
                    </button>
                </div>
                <div class="pairBlock">
                    <button type="button" id="UPCH-pair" class="pairButton"></button>
                    <button type="button" id="UPCH-button" class="registerButton">UPCH <span>[11]</span>
                        <div id="registerUPCH">placeholder</div>
                    </button>
                    <button type="button" id="UPCL-button" class="registerButton">UPCL <span>[15]</span>
                        <div id="registerUPCL">placeholder</div>
                    </button>
                </div>
            </div>
        </div>

        <div id="alu-grid" class="block">
            <div class="nameBlock">
                ALU
            </div>
            <div class="insideBlock">
                <select id="aluSelect">
                    <option value="0">0: ADD</option>
                    <option value="1">1: SUB</option>
                    <option value="2">2: NEG</option>
                    <option value="3">3: NOT</option>
                    <option value="4">4: AND</option>
                    <option value="5">5: ORR</option>
                    <option value="6">6: XOR</option>
                    <option value="7">7: SHR</option>
                    <option value="8">8: SHL</option>
                    <option value="9">9: ROR</option>
                    <option value="10">10: ROL</option>
                    <option value="11">11: RCR</option>
                    <option value="12">12: RCL</option>
                    <option value="13">13: ASR</option>
                    <option value="14">14: ASL</option>
                    <option value="15">15: BSR</option>
                    <option value="16">16: BSL</option>
                    <option value="17">17: EQU</option>
                    <option value="18">18: OOP</option>
                </select>
                <div class="spacer"></div>
                <div id="F-viewer">
                    F register
                    <table>
                        <tr>
                            <th>
                                <div class="F-viewer-NameBlock">X</div>
                            </th>
                            <th>
                                <div class="F-viewer-NameBlock">Q</div>
                            </th>
                            <th>
                                <div class="F-viewer-NameBlock">H</div>
                            </th>
                            <th>
                                <div class="F-viewer-NameBlock">P</div>
                            </th>
                            <th>
                                <div class="F-viewer-NameBlock">V</div>
                            </th>
                            <th>
                                <div class="F-viewer-NameBlock">N</div>
                            </th>
                            <th>
                                <div class="F-viewer-NameBlock">Z</div>
                            </th>
                            <th>
                                <div class="F-viewer-NameBlock">C</div>
                            </th>
                        </tr>
                        <tr>
                            <td>
                                <div class="F-viewer7 F-viewer-ValueBlock">1</div>
                            </td>
                            <td>
                                <div class="F-viewer6 F-viewer-ValueBlock">0</div>
                            </td>
                            <td>
                                <div class="F-viewer5 F-viewer-ValueBlock">1</div>
                            </td>
                            <td>
                                <div class="F-viewer4 F-viewer-ValueBlock">0</div>
                            </td>
                            <td>
                                <div class="F-viewer3 F-viewer-ValueBlock">1</div>
                            </td>
                            <td>
                                <div class="F-viewer2 F-viewer-ValueBlock">0</div>
                            </td>
                            <td>
                                <div class="F-viewer1 F-viewer-ValueBlock">1</div>
                            </td>
                            <td>
                                <div class="F-viewer0 F-viewer-ValueBlock">0</div>
                            </td>
                        </tr>
                    </table>
                </div>
                <div class="spacer"></div>
            </div>
        </div>

        <div id="addressBus-grid" class="block">
            Address Bus
            <div id="addressBus">placeholder</div>
        </div>

    </div>
</div>
</body>
</html>
